@*
    Shared Breadcrumb Navigation
    Provides consistent navigation trail across pages
*@

@{
    var currentPage = ViewContext.RouteData.Values["page"]?.ToString();
    var isSubscriptionsArea = currentPage?.Contains("/Subscriptions/") ?? false;
    var isDashboard = currentPage == "/Dashboard" || currentPage == "/Index";
    var isReports = currentPage == "/Reports";
    var isSubscriptionsIndex = currentPage == "/Subscriptions/Index";
    
    var showBreadcrumb = isSubscriptionsArea && !isSubscriptionsIndex;
}

@if (showBreadcrumb)
{
    <nav aria-label="breadcrumb" class="breadcrumb-nav mb-4">
        <ol class="breadcrumb">
            <li class="breadcrumb-item">
                <a asp-page="/Dashboard">
                    <i class="bi bi-house-door"></i>
                    <span>Home</span>
                </a>
            </li>
            
            @if (isSubscriptionsArea)
            {
                var pageName = currentPage?.Split('/').Last();
                <li class="breadcrumb-item">
                    <a asp-page="/Subscriptions/Index">Subscriptions</a>
                </li>
                
                @if (pageName != "Index")
                {
                    <li class="breadcrumb-item active" aria-current="page">
                        @(pageName == "Create" ? "Add New" : 
                          pageName == "Edit" ? "Edit" : 
                          pageName == "Delete" ? "Delete" : 
                          pageName == "Details" ? "Details" : pageName)
                    </li>
                }
            }
        </ol>
    </nav>
}

<style>
    .breadcrumb-nav {
        background: transparent;
        padding: 0;
    }
    
    .breadcrumb {
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid rgba(255, 255, 255, 0.08);
        border-radius: 0.75rem;
        padding: 0.875rem 1.5rem;
        margin-bottom: 0;
        font-size: 0.875rem;
    }
    
    .breadcrumb-item {
        color: rgba(255, 255, 255, 0.6);
    }
    
    .breadcrumb-item a {
        color: rgba(255, 255, 255, 0.7);
        text-decoration: none;
        transition: color 0.2s ease;
        display: inline-flex;
        align-items: center;
        gap: 0.375rem;
    }
    
    .breadcrumb-item a:hover {
        color: #6366f1;
    }
    
    .breadcrumb-item.active {
        color: #ffffff;
        font-weight: 600;
    }
    
    .breadcrumb-item + .breadcrumb-item::before {
        content: "ï¿½";
        color: rgba(255, 255, 255, 0.4);
        font-size: 1.125rem;
    }
    
    .breadcrumb-item i {
        font-size: 1rem;
    }
</style>

<style>
    @@media (max-width: 767.98px) {
        .breadcrumb {
            font-size: 0.8125rem;
            padding: 0.75rem 1rem;
        }
        
        .breadcrumb-item a span {
            display: none;
        }
        
        .breadcrumb-item a i {
            font-size: 1.125rem;
        }
    }
</style>
